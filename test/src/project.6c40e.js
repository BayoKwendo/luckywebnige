window.__require=function e(t,n,o){function c(a,s){if(!n[a]){if(!t[a]){var r=a.split("/");if(r=r[r.length-1],!t[r]){var l="function"==typeof __require&&__require;if(!s&&l)return l(r,!0);if(i)return i(r,!0);throw new Error("Cannot find module '"+a+"'")}}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){return c(t[a][1][e]||e)},u,u.exports,e,t,n,o)}return n[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<o.length;a++)c(o[a]);return c}({Item:[function(e,t,n){"use strict";cc._RF.push(t,"1d345nRufpAjaFTUwKK365V","Item");var o="selected_bank";cc.Class({extends:cc.Component,properties:{label:{default:null,type:cc.Label},itemID:0},onLoad:function(){this.node.on("touchend",function(){cc.sys.localStorage.removeItem(o),cc.sys.localStorage.setItem(o,JSON.stringify({name:this.label.string,code:this.itemID}))},this)},updateItem:function(e,t){this.itemID=t,this.label.string=e}}),cc._RF.pop()},{}],fbsdk:[function(e,t,n){"use strict";cc._RF.push(t,"2b846wANKlD44p2BjHif+EY","fbsdk"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var c=["email"].join(","),i=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),"undefined"!=typeof window&&this.init()}return o(e,[{key:"init",value:function(){var e=this;if(!document.getElementById("fb-root")){var t=document.createElement("div");t.id="fb-root",document.body.insertBefore(t,document.body.childNodes[0])}return function(e,t,n){var o=e.getElementsByTagName(t)[0];if(!e.getElementById(n)){var c=e.createElement(t);c.id=n,c.src="//connect.facebook.net/en_US/sdk.js",o.parentNode.insertBefore(c,o)}}(document,"script","facebook-jssdk"),new Promise(function(t){window.fbAsyncInit=function(){window.FB.init({appId:"2023431931086750",cookie:!0,xfbml:!0,version:"v3.2"}),e.FB=window.FB,t()}})}},{key:"login",value:function(e){this.FB.login(e,{scope:c})}},{key:"getLoginStatus",value:function(){var e=this;return this.init().then(function(){return new Promise(function(t){e.FB.getLoginStatus(function(e){t(e)})})})}}]),e}();n.default=new i,t.exports=n.default,cc._RF.pop()},{}],game:[function(e,t,n){"use strict";cc._RF.push(t,"3fc00W6KndFgb8LcDa9swhl","game");var o=null,c=null,i=null,a=null,s=null,r="typeLaunched",l=null,u=null,d=null;cc.Class({extends:cc.Component,properties:{audio:{type:cc.AudioClip,default:null},reveal_audio:{type:cc.AudioClip,default:null},tap_audio:{type:cc.AudioClip,default:null},back_audio:{type:cc.AudioClip,default:null},error_audio:{type:cc.AudioClip,default:null},win_audio:{type:cc.AudioClip,default:null},lose_audio:{type:cc.AudioClip,default:null},backButton:{default:null,type:cc.Button},oneButton:{default:null,type:cc.Button},twoButton:{default:null,type:cc.Button},threeButton:{default:null,type:cc.Button},fourButton:{default:null,type:cc.Button},fiveButton:{default:null,type:cc.Button},sixButton:{default:null,type:cc.Button},balanceLabel:{default:null,type:cc.Label},popup:{default:null,type:cc.Node},failPopup:{default:null,type:cc.Node},infoSlidePopup:{default:null,type:cc.Node},successPopup:{default:null,type:cc.Node},tryAgainButton:{default:null,type:cc.Button},quitButton:{default:null,type:cc.Button}},onLoad:function(){s=this,this._isLoading=!1,this.infoSlidePopup.opacity=0,!0===s.confirmSound()&&(cc.audioEngine.setMusicVolume(.4),cc.audioEngine.setEffectsVolume(.6),this.current=cc.audioEngine.playMusic(this.audio,!0),this.reveal=cc.audioEngine.playEffect(s.reveal_audio,!1)),u=cc.moveTo(.5,0,330),d=cc.moveTo(.3,550,330),this.backButton.node.on("click",s.goHome,this),this.popup.active=!1,l=cc.sys.localStorage.getItem(r),cc.sys.localStorage.removeItem(r),o=JSON.parse(cc.sys.localStorage.getItem("userData"));var e=JSON.parse(cc.sys.localStorage.getItem("balance"));this.balanceLabel.string="demo_mode"===l?"DEMO":e.balance,cc.loader.loadRes("loading",function(e,t){(i=cc.instantiate(t)).position=cc.v2({x:270,y:480}),c=i.getComponentInChildren(cc.Animation),cc.director.getScene().addChild(i),c.active=!1,i.active=!1}),cc.loader.loadRes("toast",function(e,t){(a=cc.instantiate(t)).position=cc.v2({x:270,y:480}),cc.director.getScene().addChild(a),a.active=!1,a.getComponentInChildren(cc.Button).node.on("click",s.closeToast,this)}),this.oneButton.node.on("click",s.box1,this),this.twoButton.node.on("click",s.box2,this),this.threeButton.node.on("click",s.box3,this),this.fourButton.node.on("click",s.box4,this),this.fiveButton.node.on("click",s.box5,this),this.sixButton.node.on("click",s.box6,this),this.tryAgainButton.node.on("click",function(){this._removeAllChildren(),this.popup.active=!1,this.infoSlidePopup.stopAction(u),this.infoSlidePopup.stopAction(d),s.infoSlidePopup.opacity=0,s._isLoadingScene=!1},this),this.quitButton.node.on("click",function(){s.playBackClick(),cc.director.loadScene("start")},this)},playBackClick:function(){!0===s.confirmSound()&&(s.effect=cc.audioEngine.playEffect(s.back_audio,!1))},playError:function(){!0===s.confirmSound()&&(s.error_mp3=cc.audioEngine.playEffect(s.error_audio,!1))},playClick:function(){!0===s.confirmSound()&&(s.tap_click=cc.audioEngine.playEffect(s.tap_audio,!1))},playWinSound:function(){!0===s.confirmSound()&&(s.win_mp3=cc.audioEngine.playEffect(s.win_audio,!1))},playLossSound:function(){!0===s.confirmSound()&&(s.loss_mp3=cc.audioEngine.playEffect(s.error_audio,!1))},confirmSound:function(){var e=cc.sys.localStorage.getItem("soundConfig");return"true"===e||null==e},_removeAllChildren:function(){this.successPopup.removeAllChildren(!0),this.failPopup.removeAllChildren(!0)},start:function(){null!=c&&(c.active=!1,i.active=!1)},goHome:function(){s.playBackClick(),cc.director.loadScene("start")},onDestroy:function(){cc.audioEngine.stopAll()},closeToast:function(){a.active=!1},runAnim:function(e){c.active=!0,i.active=!0;var t=c.getComponent(cc.Animation);if(e){var n=t.play();n.wrapMode=cc.WrapMode.Normal,n.repeatCount=1/0}else t.stop(),c.active=!1,i.active=!1},box1:function(){this._isLoadingScene||(s.playClick(),"demo_mode"!==l?s.sendRequest("1"):s.demoMode("1"))},box2:function(){this._isLoadingScene||(s.playClick(),"demo_mode"!==l?s.sendRequest("2"):s.demoMode("2"))},box3:function(){this._isLoadingScene||(s.playClick(),"demo_mode"!==l?s.sendRequest("3"):s.demoMode("3"))},box4:function(){this._isLoadingScene||(s.playClick(),"demo_mode"!==l?s.sendRequest("4"):s.demoMode("4"))},box5:function(){this._isLoadingScene||(s.playClick(),"demo_mode"!==l?s.sendRequest("5"):s.demoMode("5"))},box6:function(){this._isLoadingScene||(s.playClick(),"demo_mode"!==l?s.sendRequest("6"):s.demoMode("6"))},sendRequest:function(e){this._isLoadingScene=!0;var t=null,n=new Hashes.SHA512,c=null,i=a.getComponentInChildren(cc.Label);if(s.unscheduleAllCallbacks(),s.infoSlidePopup.opacity=0,null==o||!o.hasOwnProperty("token"))return this._isLoadingScene=!1,void s.goHome();if(null==e)return s.playError(),this._isLoadingScene=!1,i.string="Select a box to continue.",void(a.active=!0);t=JSON.stringify({text:e,token:o.token,platform:"Android",customer_id:o.customer_id}),c=n.hex(o.token+o.customer_id+"P@s5w0rd_5@lt"+e),this.runAnim(!0);var r=new XMLHttpRequest;r.open("POST","https://luckybox.ng/test/interface/",!0),r.setRequestHeader("Content-Type","application/json"),r.setRequestHeader("signature",c),r.setRequestHeader("cache-control","no-cache"),r.timeout=1e4,r.ontimeout=function(e){s.runAnim(!1),s.playError(),a.getComponentInChildren(cc.Label).string="Request Timeout.\nCheck your network connection",a.active=!0},r.addEventListener("readystatechange",function(){if(4===this.readyState)if(s.runAnim(!1),this.status>=200&&this.status<400){var e=JSON.parse(this.responseText);if(0==e.code&&null==e.error){var t=e.options,n=e.choice;s.posx=1;var c={balance:e.balance};for(var r in cc.sys.localStorage.setItem("balance",JSON.stringify(c)),s.balanceLabel.string=e.balance,t){var l=null;if(l=Math.floor(parseFloat(t[r])>0)?"glow"+r:r,r!=n){if(1==s.posx){cc.loader.loadRes(l,cc.SpriteFrame,function(t,n){if(t)cc.error(t.message||t);else{var o=new cc.Node;o.position=cc.v2({x:-63,y:-77}),o.setScale(cc.v2(.7,.7)),o.addComponent(cc.Sprite).spriteFrame=n,"lost"===e.status?s.failPopup.addChild(o):s.successPopup.addChild(o)}});var p=new cc.Node;p.position=cc.v2({x:-63,y:-150}),p.setScale(cc.v2(.4,.4)),p.addComponent(cc.Label).string="NGN "+s.numberFormat(t[r]),"lost"===e.status?s.failPopup.addChild(p):s.successPopup.addChild(p)}else if(2==s.posx){cc.loader.loadRes(l,cc.SpriteFrame,function(t,n){if(t)cc.error(t.message||t);else{var o=new cc.Node;o.position=cc.v2({x:68,y:-77}),o.setScale(cc.v2(.7,.7)),o.addComponent(cc.Sprite).spriteFrame=n,"lost"===e.status?s.failPopup.addChild(o):s.successPopup.addChild(o)}});var h=new cc.Node;h.position=cc.v2({x:65,y:-150}),h.setScale(cc.v2(.4,.4)),h.addComponent(cc.Label).string="NGN "+s.numberFormat(t[r]),"lost"===e.status?s.failPopup.addChild(h):s.successPopup.addChild(h)}else if(3==s.posx){cc.loader.loadRes(l,cc.SpriteFrame,function(t,n){if(t)cc.error(t.message||t);else{var o=new cc.Node;o.position=cc.v2({x:-130,y:-231}),o.setScale(cc.v2(.7,.7)),o.addComponent(cc.Sprite).spriteFrame=n,"lost"===e.status?s.failPopup.addChild(o):s.successPopup.addChild(o)}});var f=new cc.Node;f.position=cc.v2({x:-131,y:-304}),f.setScale(cc.v2(.4,.4)),f.addComponent(cc.Label).string="NGN "+s.numberFormat(t[r]),"lost"===e.status?s.failPopup.addChild(f):s.successPopup.addChild(f)}else if(4==s.posx){cc.loader.loadRes(l,cc.SpriteFrame,function(t,n){if(t)cc.error(t.message||t);else{var o=new cc.Node;o.position=cc.v2({x:0,y:-231}),o.setScale(cc.v2(.7,.7)),o.addComponent(cc.Sprite).spriteFrame=n,"lost"===e.status?s.failPopup.addChild(o):s.successPopup.addChild(o)}});var g=new cc.Node;g.position=cc.v2({x:1,y:-304}),g.setScale(cc.v2(.4,.4)),g.addComponent(cc.Label).string="NGN "+s.numberFormat(t[r]),"lost"===e.status?s.failPopup.addChild(g):s.successPopup.addChild(g)}else if(5==s.posx){cc.loader.loadRes(l,cc.SpriteFrame,function(t,n){if(t)cc.error(t.message||t);else{var o=new cc.Node;o.position=cc.v2({x:131,y:-231}),o.setScale(cc.v2(.7,.7)),o.addComponent(cc.Sprite).spriteFrame=n,"lost"===e.status?s.failPopup.addChild(o):s.successPopup.addChild(o)}});var m=new cc.Node;m.position=cc.v2({x:131,y:-304}),m.setScale(cc.v2(.4,.4)),m.addComponent(cc.Label).string="NGN "+s.numberFormat(t[r]),"lost"===e.status?s.failPopup.addChild(m):s.successPopup.addChild(m)}s.posx++}else{cc.loader.loadRes(l,cc.SpriteFrame,function(t,n){if(t)cc.error(t.message||t);else{var o=new cc.Node;o.position=cc.v2({x:0,y:145}),o.setScale(cc.v2(1,1)),o.addComponent(cc.Sprite).spriteFrame=n,"lost"===e.status?s.failPopup.addChild(o):s.successPopup.addChild(o)}});var y=new cc.Node;y.position=cc.v2({x:2,y:35}),y.setScale(cc.v2(.55,.55)),y.addComponent(cc.Label).string="NGN "+s.numberFormat(t[r]),"lost"===e.status?s.failPopup.addChild(y):s.successPopup.addChild(y)}}if("lost"===e.status?(s.playLossSound(),s.successPopup.active=!1,s.failPopup.active=!0,s.popup.active=!0):"won"===e.status&&(s.playWinSound(),s.successPopup.active=!0,s.failPopup.active=!1,s.popup.active=!0),e.hasOwnProperty("footer")&&e.footer&&""!=e.footer)s.infoSlidePopup.opacity=255,s.infoSlidePopup.runAction(u),s.infoSlidePopup.getComponentInChildren(cc.Label).string=e.footer,s.scheduleOnce(function(){s.infoSlidePopup.runAction(d),s.infoSlidePopup.opacity=0},2)}else 104==e.code?(s.playError(),cc.sys.localStorage.clear(),o={},i.string="Session Expired\nLog in again to continue",a.active=!0,s._isLoadingScene=!1):105==e.code?(i.string="Insufficient balance",a.active=!0,cc.sys.localStorage.removeItem("stageLaunched"),cc.sys.localStorage.setItem("stageLaunched","recharge"),s.playError(),s._isLoadingScene=!1,s.scheduleOnce(function(){cc.director.loadScene("others")},1.2)):(s.playError(),i.string=e.error,a.active=!0,s._isLoadingScene=!1)}else s.playError(),cc.sys.localStorage.clear(),o={},i.string="Network Error.\nTry again later",a.active=!0,s._isLoadingScene=!1}),r.send(t)},calculate:function(){var e=Math.pow(10,0);return Math.round((95e3*Math.random()+500)*e)/e},demoMode:function(e){this._isLoadingScene=!0;var t=a.getComponentInChildren(cc.Label);s.unscheduleAllCallbacks(),s.infoSlidePopup.opacity=0;var n=["lost","won"],o=n[Math.floor(Math.random()*n.length)],c='{\n            "balance": "100.00",\n            "choice": '+e+',\n            "code": 0,\n            "error": null,\n            "footer": "Martin just won NGN 5000. Don\'t give up continue playing and you could be next",\n            "options": {\n                "1": '+(1==e&&"lost"===o?"0":s.calculate())+',\n                "2": '+(2==e&&"lost"===o?"0":s.calculate())+',\n                "3": '+(3==e&&"lost"===o?"0":s.calculate())+',\n                "4": '+(4==e&&"lost"===o?"0":s.calculate())+',\n                "5": '+(5==e&&"lost"===o?"0":s.calculate())+',\n                "6": '+(6==e&&"lost"===o?"0":s.calculate())+'\n            },\n\n            "status": "'+o+'"\n        }',i=JSON.parse(c);if(0==i.code&&null==i.error){var r=i.options,l=i.choice;for(var p in s.posx=1,r){var h=null;if(h=Math.floor(parseFloat(r[p])>0)?"glow"+p:p,p!=l){if(1==s.posx){cc.loader.loadRes(h,cc.SpriteFrame,function(e,t){if(e)cc.error(e.message||e);else{var n=new cc.Node;n.position=cc.v2({x:-63,y:-77}),n.setScale(cc.v2(.7,.7)),n.addComponent(cc.Sprite).spriteFrame=t,"lost"===i.status?s.failPopup.addChild(n):s.successPopup.addChild(n)}});var f=new cc.Node;f.position=cc.v2({x:-63,y:-150}),f.setScale(cc.v2(.4,.4)),f.addComponent(cc.Label).string="NGN "+s.numberFormat(r[p]),"lost"===i.status?s.failPopup.addChild(f):s.successPopup.addChild(f)}else if(2==s.posx){cc.loader.loadRes(h,cc.SpriteFrame,function(e,t){if(e)cc.error(e.message||e);else{var n=new cc.Node;n.position=cc.v2({x:68,y:-77}),n.setScale(cc.v2(.7,.7)),n.addComponent(cc.Sprite).spriteFrame=t,"lost"===i.status?s.failPopup.addChild(n):s.successPopup.addChild(n)}});var g=new cc.Node;g.position=cc.v2({x:65,y:-150}),g.setScale(cc.v2(.4,.4)),g.addComponent(cc.Label).string="NGN "+s.numberFormat(r[p]),"lost"===i.status?s.failPopup.addChild(g):s.successPopup.addChild(g)}else if(3==s.posx){cc.loader.loadRes(h,cc.SpriteFrame,function(e,t){if(e)cc.error(e.message||e);else{var n=new cc.Node;n.position=cc.v2({x:-130,y:-231}),n.setScale(cc.v2(.7,.7)),n.addComponent(cc.Sprite).spriteFrame=t,"lost"===i.status?s.failPopup.addChild(n):s.successPopup.addChild(n)}});var m=new cc.Node;m.position=cc.v2({x:-131,y:-304}),m.setScale(cc.v2(.4,.4)),m.addComponent(cc.Label).string="NGN "+s.numberFormat(r[p]),"lost"===i.status?s.failPopup.addChild(m):s.successPopup.addChild(m)}else if(4==s.posx){cc.loader.loadRes(h,cc.SpriteFrame,function(e,t){if(e)cc.error(e.message||e);else{var n=new cc.Node;n.position=cc.v2({x:0,y:-231}),n.setScale(cc.v2(.7,.7)),n.addComponent(cc.Sprite).spriteFrame=t,"lost"===i.status?s.failPopup.addChild(n):s.successPopup.addChild(n)}});var y=new cc.Node;y.position=cc.v2({x:1,y:-304}),y.setScale(cc.v2(.4,.4)),y.addComponent(cc.Label).string="NGN "+s.numberFormat(r[p]),"lost"===i.status?s.failPopup.addChild(y):s.successPopup.addChild(y)}else if(5==s.posx){cc.loader.loadRes(h,cc.SpriteFrame,function(e,t){if(e)cc.error(e.message||e);else{var n=new cc.Node;n.position=cc.v2({x:131,y:-231}),n.setScale(cc.v2(.7,.7)),n.addComponent(cc.Sprite).spriteFrame=t,"lost"===i.status?s.failPopup.addChild(n):s.successPopup.addChild(n)}});var v=new cc.Node;v.position=cc.v2({x:131,y:-304}),v.setScale(cc.v2(.4,.4)),v.addComponent(cc.Label).string="NGN "+s.numberFormat(r[p]),"lost"===i.status?s.failPopup.addChild(v):s.successPopup.addChild(v)}s.posx++}else{cc.loader.loadRes(h,cc.SpriteFrame,function(e,t){if(e)cc.error(e.message||e);else{var n=new cc.Node;n.position=cc.v2({x:0,y:145}),n.setScale(cc.v2(1,1)),n.addComponent(cc.Sprite).spriteFrame=t,"lost"===i.status?s.failPopup.addChild(n):s.successPopup.addChild(n)}});var S=new cc.Node;S.position=cc.v2({x:2,y:35}),S.setScale(cc.v2(.55,.55)),S.addComponent(cc.Label).string="NGN "+s.numberFormat(r[p]),"lost"===i.status?s.failPopup.addChild(S):s.successPopup.addChild(S)}}if("lost"===i.status?(s.playLossSound(),s.successPopup.active=!1,s.failPopup.active=!0,s.popup.active=!0):"won"===i.status&&(s.playWinSound(),s.successPopup.active=!0,s.failPopup.active=!1,s.popup.active=!0),i.hasOwnProperty("footer")&&""!=i.footer)s.infoSlidePopup.opacity=255,s.infoSlidePopup.runAction(u),s.infoSlidePopup.getComponentInChildren(cc.Label).string=i.footer,s.scheduleOnce(function(){s.infoSlidePopup.runAction(d),s.infoSlidePopup.opacity=0},2)}else s.playError(),t.string="Something went wrong. Try again later",a.active=!0,s._isLoadingScene=!1;s._isLoadingScene=!1},numberFormat:function(e){return(e=Math.floor(parseFloat(e.toString().replace(/[^\d\.]/g,"")))).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}}),cc._RF.pop()},{}],googlesdk:[function(e,t,n){"use strict";cc._RF.push(t,"00127jKz09E8KKenR72tfYJ","googlesdk"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var c=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),"undefined"!=typeof window&&this.init()}return o(e,[{key:"init",value:function(){(function(e,t,n){var o=e.getElementsByTagName(t)[0];if(!e.getElementById(n)){var c=e.createElement(t);c.id=n,c.src="//apis.google.com/js/client.js",o.parentNode.insertBefore(c,o)}})(document,"script","google-lib")}},{key:"login",value:function(e){return new Promise(function(t,n){var o=function(e){return n(JSON.stringify(e))};window.gapi.load("auth2",function(){window.gapi.auth2.getAuthInstance().then(function(t){t.signIn().then(e)},o)})})}},{key:"loginBackup",value:function(){return new Promise(function(e,t){var n=function(e){return t(JSON.stringify(e))};window.gapi.auth2.init({client_id:"172569418926-uj31v81qd2ss1of41d08meqb9e2vk4gh.apps.googleusercontent.com",cookiepolicy:"single_host_origin",scope:"profile email"}),window.gapi.load("auth2",function(){window.gapi.auth2.getAuthInstance().then(function(t){t.signIn().then(function(n){t.currentUser.get().getAuthResponse(!0);var o=t.currentUser.get().getBasicProfile();console.log(o);var c=JSON.stringify({userID:o.getId()?o.getId():"",name:o.getName()?o.getName():"",email:o.getEmail()?o.getEmail():"",platform:"Android"});e(c)},n)},n)})})}},{key:"getLoginStatus",value:function(){var e=this;return this.init().then(function(){return new Promise(function(t){e.FB.getLoginStatus(function(e){t(e)})})})}}]),e}();n.default=new c,t.exports=n.default,cc._RF.pop()},{}],others:[function(e,t,n){"use strict";cc._RF.push(t,"04a10DcZexL/otawhZGkQv0","others");var o=null,c="stageLaunched",i=null,a=null,s=null,r=null,l=null,u="",d=null,p=null;cc.Class({extends:cc.Component,properties:{tap_audio:{type:cc.AudioClip,default:null},back_audio:{type:cc.AudioClip,default:null},error_audio:{type:cc.AudioClip,default:null},backButton:{default:null,type:cc.Button},sendButton:{default:null,type:cc.Button},forgotEmailField:{default:null,type:cc.EditBox},resetOldField:{default:null,type:cc.EditBox},resetNewField:{default:null,type:cc.EditBox},withdrawAmountField:{default:null,type:cc.EditBox},withdrawPhoneField:{default:null,type:cc.EditBox},rechargeFnameField:{default:null,type:cc.EditBox},rechargeAccountField:{default:null,type:cc.EditBox},rechargeBankField:{default:null,type:cc.Button},rechargeAmountField:{default:null,type:cc.EditBox},rechargeEmailField:{default:null,type:cc.EditBox},resetNode:{default:null,type:cc.Node},forgotNode:{default:null,type:cc.Node},withdrawNode:{default:null,type:cc.Node},rechargeNode:{default:null,type:cc.Node},rechargePopUpNode:{default:null,type:cc.Node},rechargePopUpName:{default:null,type:cc.Label},rechargePopUpAmount:{default:null,type:cc.Label},rechargePopUpReference:{default:null,type:cc.Label},rechargePopUpCancel:{default:null,type:cc.Button},rechargeViaPaystack:{default:null,type:cc.Button},rechargeViaInterSwitch:{default:null,type:cc.Button},itemTemplate:{default:null,type:cc.Node},scrollView:{default:null,type:cc.ScrollView},bankNode:{default:null,type:cc.Node},bankSelectedLabel:{default:null,type:cc.Label},closeBanks:{default:null,type:cc.Button},spawnCount:0,totalCount:0,spacing:0,bufferZone:0},onLoad:function(){l=this,cc.audioEngine.setEffectsVolume(.6),this.backButton.node.on("click",l.goHome,this),this.sendButton.node.on("click",l.sendRequest,this),this.rechargeViaPaystack.node.on("click",l.payStack,this),this.rechargeViaInterSwitch.node.on("click",l.interSwitch,this),this.rechargePopUpCancel.node.on("click",function(){this.rechargePopUpNode.active=!1,this.sendButton.interactable=!0},this),this.rechargeBankField.node.on("click",function(){this.content.active=!0,this.bankNode.active=!0,this.closeBanks.node.active=!0},this),this.closeBanks.node.on("click",function(){this.content.active=!1,this.bankNode.active=!1,this.closeBanks.node.active=!1},this),i=JSON.parse(cc.sys.localStorage.getItem("userData")),o=cc.sys.localStorage.getItem(c),cc.sys.localStorage.removeItem(c),this.resetNode.active=!1,this.forgotNode.active=!1,this.withdrawNode.active=!1,this.rechargeNode.active=!1,this.rechargePopUpNode.active=!1,this.bankNode.active=!1,this.closeBanks.node.active=!1,"recharge"===o?(this.rechargeNode.active=!0,this.rechargeFnameField.string=i.name?i.name:"",this.rechargeAccountField.string=i.account?i.account:"",this.rechargeEmailField.string=i.email?i.email:"",this.content=this.scrollView.content,this.content.active=!1,this.items=[],this.initialize(),this.updateTimer=0,this.updateInterval=.2,this.lastContentPosY=0,this.sendButton.node.setPosition(cc.v2(0,-355))):"reset"===o?this.resetNode.active=!0:"forgot"===o?this.forgotNode.active=!0:"withdraw"===o&&(this.withdrawNode.active=!0,this.withdrawPhoneField.string=i.msisdn?i.msisdn:""),cc.loader.loadRes("loading",function(e,t){(s=cc.instantiate(t)).position=cc.v2({x:270,y:480}),a=s.getComponentInChildren(cc.Animation),cc.director.getScene().addChild(s),a.active=!1,s.active=!1}),cc.loader.loadRes("toast",function(e,t){(r=cc.instantiate(t)).position=cc.v2({x:270,y:480}),cc.director.getScene().addChild(r),r.active=!1,r.getComponentInChildren(cc.Button).node.on("click",l.closeToast,this)})},playBackClick:function(){!0===l.confirmSound()&&(l.effect=cc.audioEngine.playEffect(l.back_audio,!1))},playError:function(){!0===l.confirmSound()&&(l.error_mp3=cc.audioEngine.playEffect(l.error_audio,!1))},playClick:function(){!0===l.confirmSound()&&(l.tap_effect=cc.audioEngine.playEffect(l.tap_audio,!1))},confirmSound:function(){var e=cc.sys.localStorage.getItem("soundConfig");return"true"===e||null==e},onDestroy:function(){cc.audioEngine.stopAll()},initialize:function(){var e={"044":"Access Bank","063":"Diamond Bank","050":"Ecobank",214:"FCMB","070":"Fidelity Bank","011":"First Bank of Nigeria","058":"Guaranty Trust Bank","030":"Heritage Bank",301:"Jaiz Bank","082":"Keystone",101:"Providus","076":"Skye Bank",221:"Stanbic IBTC Bank","068":"Standard Chartered",232:"Sterling Bank","032":"Union Bank","033":"United Bank for Africa",215:"Unity Bank","035":"Wema Bank","057":"Zenith International Bank"};this.content.height=this.totalCount*(this.itemTemplate.height+this.spacing)+this.spacing;for(var t=0;t<this.spawnCount;++t){var n=cc.instantiate(this.itemTemplate);this.content.addChild(n),n.setPosition(0,-n.height*(.5+t)-this.spacing*(t+1)),n.getComponent("Item").updateItem(e[Object.keys(e)[t]],Object.keys(e)[t]),this.items.push(n)}},getPositionInView:function(e){var t=e.parent.convertToWorldSpaceAR(e.position);return this.scrollView.node.convertToNodeSpaceAR(t)},activeBank:function(e){this.content.active=!1,this.bankNode.active=!1,this.closeBanks.node.active=!1,p=e.code,this.bankSelectedLabel.string=e.name,cc.sys.localStorage.removeItem("selected_bank")},update:function(e){if(this.updateTimer+=e,"recharge"===o){var t=JSON.parse(cc.sys.localStorage.getItem("selected_bank"));if(null===t||l.activeBank(t),this.updateTimer<this.updateInterval)return;this.updateTimer=0;for(var n=this.items,c=this.bufferZone,i=this.scrollView.content.y<this.lastContentPosY,a=(this.itemTemplate.height+this.spacing)*n.length,s=0;s<n.length;++s){var r=this.getPositionInView(n[s]);if(i){if(r.y<-c&&n[s].y+a<0){n[s].y=n[s].y+a;var u=n[s].getComponent("Item"),d=u.itemID-n.length;u.updateItem(s,d)}}else if(r.y>c&&n[s].y-a>-this.content.height){n[s].y=n[s].y-a;var p=n[s].getComponent("Item"),h=p.itemID+n.length;p.updateItem(s,h)}}this.lastContentPosY=this.scrollView.content.y}},goHome:function(){l.playBackClick(),cc.director.loadScene("start")},closeToast:function(){r.active=!1},runAnim:function(e){a.active=!0,s.active=!0;var t=a.getComponent(cc.Animation);if(e){var n=t.play();n.wrapMode=cc.WrapMode.Normal,n.repeatCount=1/0}else t.stop(),a.active=!1,s.active=!1},sendRequest:function(){l.playClick(),l.sendButton.interactable=!1,l.is_loading=!0;var e="",t="",n="",c="",a="",s="",h="",f=null,g=new Hashes.SHA512,m=null,y=null;if("recharge"===o&&null!==this.bank_code&&""!==this.rechargeFnameField.string&&""!==this.rechargeAccountField.string&&""!==this.rechargeAmountField.string&&""!==this.rechargeEmailField.string){l.checkifnull(),t=this.rechargeFnameField.string,n=this.rechargeAccountField.string,u=this.rechargeAmountField.string,c=this.rechargeEmailField.string;var v=new UUID(4).format("std");d=v.replace(/-/g,"").substr(3,12).toUpperCase(),f=JSON.stringify({name:t,token:i.token,customer_id:i.customer_id,amount:u,email:c,account:n,code:p,transaction_id:d,country:"NG",platform:"Android"}),m=g.hex(i.token+i.customer_id+u+"P@s5w0rd_5@lt"+d+"Android"),y="https://luckybox.ng/test/deposit/"}else if("withdraw"===o&&""!==this.withdrawAmountField.string&&""!==this.withdrawPhoneField.string)l.checkifnull(),a=this.withdrawAmountField.string,e=this.withdrawPhoneField.string,e=this.formatMsisdn(e,"234"),f=JSON.stringify({amount:a,token:i.token,customer_id:i.customer_id,platform:"Android",msisdn:e}),m=g.hex(i.token+i.customer_id+"P@s5w0rd_5@lt"+a+"Android"+e),y="https://luckybox.ng/test/payment/";else if("forgot"===o&&""!==this.forgotEmailField.string)c=this.forgotEmailField.string,f=JSON.stringify({platform:"Android",email:c}),m=g.hex(c+"P@s5w0rd_5@ltAndroid"),y="https://luckybox.ng/test/reset_pin/";else{if("reset"!==o||""===this.resetOldField.string||""===this.resetNewField.string)return l.playError(),r.getComponentInChildren(cc.Label).string="Fill all the fields to continue.",r.active=!0,void(l.sendButton.interactable=!0);l.checkifnull(),s=this.resetOldField.string,h=this.resetNewField.string,f=JSON.stringify({platform:"Android",token:i.token,customer_id:i.customer_id,current_pin:s,new_pin:h}),m=g.hex(i.token+i.customer_id+"P@s5w0rd_5@lt"+s+h+"Android"),y="https://luckybox.ng/test/change_pin/"}this.runAnim(!0);var S=new XMLHttpRequest;S.open("POST",y,!0),S.setRequestHeader("Content-Type","application/json"),S.setRequestHeader("signature",m),S.setRequestHeader("cache-control","no-cache"),S.timeout=1e4,S.ontimeout=function(e){l.runAnim(!1),l.playError(),r.getComponentInChildren(cc.Label).string="Request Timeout.\nCheck your network connection",r.active=!0,l.sendButton.interactable=!0},S.addEventListener("readystatechange",function(){if(4===this.readyState){l.runAnim(!1);var e=r.getComponentInChildren(cc.Label);if(this.status>=200&&this.status<400){var n=JSON.parse(this.responseText);0==n.code&&null==n.error?"recharge"===o?(l.rechargePopUpName.string=i.name?i.name:t,l.rechargePopUpAmount.string="NGN "+u,l.rechargePopUpReference.string="User: "+i.email+"\nRef No: "+d,l.rechargePopUpNode.active=!0):"forgot"===o?(e.string="Success. A new PIN has been sent to your email",r.active=!0):"withdraw"===o?(e.string="Your Withdraw Request was successful",r.active=!0):"reset"===o&&(e.string="Pin Reset Succesfully",r.active=!0):104==n.code?(l.playError(),cc.sys.localStorage.clear(),i={},e.string="Session Expired\nLog in again to continue",r.active=!0):(l.playError(),e.string=n.error,r.active=!0,l.sendButton.interactable=!0)}else l.playError(),cc.sys.localStorage.clear(),i={},e.string="Network Error.\nTry again later",r.active=!0,l.sendButton.interactable=!0}}),S.send(f)},payStack:function(){l.playClick();var e="Itma@ZxN3Q8R%%K2RKxSJroDAsBUuK"+100*u+i.email+d,t=(new Hashes.SHA512).hex(e);if(cc.sys.isNative){var n="https://luckybox.ng/pay.php?email="+i.email+"&amount="+100*u+"&ref="+d+"&hash="+t;cc.sys.openURL(n)}else if(null!=(i=JSON.parse(cc.sys.localStorage.getItem("userData")))&&i.hasOwnProperty("token")){(function(e,t){if(null!==document.getElementById("paystack_form_gen")){var n=document.getElementById("paystack_form_gen");n.parentNode.removeChild(n)}var o=document.createElement("form");for(var c in o.target="_blank",o.method="POST",o.id="paystack_form_gen",o.name="paystack_form_gen",o.action=e,t){var i=document.createElement("input");i.type="hidden",i.name=c,i.value=t[c],o.appendChild(i)}document.body.appendChild(o),document.paystack_form_gen.submit()})("https://luckybox.ng/pay.php",{amount:100*u,ref:d,email:i.email,hash:t}),cc.director.loadScene("start")}else cc.director.loadScene("start")},interSwitch:function(){l.playClick();var e="https://api.supaplayer.com:5004/luckybox/confirm_deposit",t=d+"7585101"+100*u+e+"98391C2E957C3F507381D59C2B44579DE5C5B451A4B475B6121B1594E2776020F16A8397CBD7045734B8FA6CB864465349A0771371C8C499720BCCED7A142AE1",n=(new Hashes.SHA512).hex(t),o=i.name?i.name:"Customer";if(cc.sys.isNative){var c="https://luckybox.ng/gateway.php?name="+o+"&amount="+100*u+"&txn_ref="+d+"&hash="+n+"&msisdn="+i.customer_id;cc.sys.openURL(c)}else if(null!=i&&i.hasOwnProperty("token")){(function(e,t){if(null!==document.getElementById("form_one")){var n=document.getElementById("form_one");n.parentNode.removeChild(n)}var o=document.createElement("form");for(var c in o.target="_blank",o.method="POST",o.id="form_one",o.name="form_one",o.action=e,t){var i=document.createElement("input");i.type="hidden",i.name=c,i.value=t[c],o.appendChild(i)}document.body.appendChild(o),document.form_one.submit()})("https://webpay.interswitchng.com/paydirect/pay",{product_id:"7585",pay_item_id:"101",amount:100*u,currency:566,site_redirect_url:e,txn_ref:d,cust_id:i.customer_id,site_name:"Lucky Box Nigeria",cust_name:o,hash:n}),cc.director.loadScene("start")}else cc.director.loadScene("start")},checkifnull:function(){null!=i&&i.hasOwnProperty("token")||l.goHome()},formatMsisdn:function(e,t){return e.replace(/^234+/,"").replace(/[^0-9\\+]/g,"").replace(/(^[1-9].+)/g,t+"$1").replace(/(.)(\++)(.)/g,"$1$3").replace(/(^0{2}|^\\+)(.+)/g,"$2").replace(/^0([1-9])/g,t+"$1")}}),cc._RF.pop()},{}],parent:[function(e,t,n){"use strict";cc._RF.push(t,"d98c4XmYeFM/awtCsBJgOcV","parent");cc.Class({extends:cc.Component,onLoad:function(){var e=this;this._isLoadingScene=!1,cc.game.addPersistRootNode(this.node),this.currentSceneUrl="start.fire",cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(t){t.keyCode!==cc.macro.KEY.b&&t.keyCode!==cc.macro.KEY.back||e.backToList()},this),cc.director.on(cc.Director.EVENT_AFTER_SCENE_LAUNCH,this._onSceneLaunched,this),this.loadScene(this.currentSceneUrl)},_onSceneLaunched:function(){},backToList:function(){this.loadScene("start.fire")},loadScene:function(e){this._isLoadingScene||cc.director.loadScene(e,this.onLoadSceneFinish.bind(this))&&(this._isLoadingScene=!0,this.currentSceneUrl=e)},onLoadSceneFinish:function(){this.currentSceneUrl;this._isLoadingScene=!1},restart:function(){cc.game.restart()},gc:function(){cc.sys.garbageCollect()}}),cc._RF.pop()},{}],start:[function(e,t,n){"use strict";cc._RF.push(t,"b8ee5+9cZND35nVcK5sMYjB","start");var o=i(e("../libs/fbsdk")),c=i(e("../libs/googlesdk"));function i(e){return e&&e.__esModule?e:{default:e}}var a={},s=null,r=null,l=null;cc.Class({extends:cc.Component,properties:{audio:{type:cc.AudioClip,default:null},tap_audio:{type:cc.AudioClip,default:null},error_audio:{type:cc.AudioClip,default:null},sound:{type:cc.Button,default:null},iconVolumeOff:{default:null,type:cc.SpriteFrame},iconVolumeOn:{default:null,type:cc.SpriteFrame},signOut:{default:null,type:cc.Button},resetPin:{default:null,type:cc.Button},signOutSprite:{default:null,type:cc.Node},resetPinSprite:{default:null,type:cc.Node},phoneField:{default:null,type:cc.EditBox},pinField:{default:null,type:cc.EditBox},signupemailField:{default:null,type:cc.EditBox},signuppinField:{default:null,type:cc.EditBox},popUp:{default:null,type:cc.Node},playButton:{default:null,type:cc.Animation},demoButton:{default:null,type:cc.Button},loginButton:{default:null,type:cc.Button},facebookButton:{default:null,type:cc.Button},googleButton:{default:null,type:cc.Button},signupButton:{default:null,type:cc.Button},signup_sendButton:{default:null,type:cc.Button},closeSignupButton:{default:null,type:cc.Button},toast:{default:null,type:cc.Node},signupNode:{default:null,type:cc.Node},signupCheckBox:{default:null,type:cc.Toggle},bottomBar:{default:null,type:cc.Node},closeToast:{default:null,type:cc.Button},messageToast:{default:null,type:cc.Label},withdrawButton:{default:null,type:cc.Button},rechargeButton:{default:null,type:cc.Button},forgotPIN:{default:null,type:cc.Button},balance:{default:null,type:cc.Label},_isEditingReturn:!1},onLoad:function(){s=this,cc.audioEngine.setMusicVolume(.4),cc.audioEngine.setEffectsVolume(.6),!0===s.confirmSound()?(this.current=cc.audioEngine.playMusic(this.audio,!0),s.setVolumeIconOn()):s.setVolumeIconOff();var e=this.playButton.play();e.wrapMode=cc.WrapMode.Normal,e.repeatCount=1/0,this.playButton.node.on("click",s.callback,this),this.signupButton.node.on("click",s.showSignUp,this),this.closeSignupButton.node.on("click",s.closeSignUp,this),this.closeToast.node.on("click",s.closeToastPopup,this),this.loginButton.node.on("click",s.loginRequest,this),this.facebookButton.node.on("click",s.fbloginRequest,this),this.googleButton.node.on("click",s.googleloginRequest,this),this.signup_sendButton.node.on("click",s.signupRequest,this),this.rechargeButton.node.on("click",s.recharge,this),this.withdrawButton.node.on("click",s.withdraw,this),this.signOut.node.on("click",function(){s.playClick(),cc.sys.localStorage.clear(),a={},s.messageToast.string="You have logged out\nLog in again to play",s.toast.active=!0,s.bottomBar.runAction(cc.moveTo(.5,0,-540)),s.signOutSprite.runAction(cc.moveTo(.5,-213,520)),s.resetPinSprite.runAction(cc.moveTo(.5,213,520))},this),this.demoButton.node.on("click",function(){cc.sys.localStorage.setItem("typeLaunched","demo_mode"),cc.director.loadScene("game")},this),this.sound.node.on("click",function(){s.playClick(),cc.audioEngine.isMusicPlaying()?(cc.sys.localStorage.setItem("soundConfig","false"),s.setVolumeIconOff(),cc.audioEngine.stopAll()):(cc.sys.localStorage.setItem("soundConfig","true"),s.setVolumeIconOn(),cc.audioEngine.resumeAll(),this.current=cc.audioEngine.playMusic(this.audio,!0))},this),this.resetPin.node.on("click",function(){s.playClick(),null!=(a=JSON.parse(cc.sys.localStorage.getItem("userData")))&&a.hasOwnProperty("token")?(cc.sys.localStorage.setItem("stageLaunched","reset"),cc.director.loadScene("others")):(s.messageToast.string="You have to be logged in to continue",s.toast.active=!0,s.scheduleOnce(function(){s.closeActivePopup()},1.2))},this),this.forgotPIN.node.on("click",function(){s.playClick(),cc.sys.localStorage.setItem("stageLaunched","forgot"),cc.director.loadScene("others")},this),this.toast.active=!1,this.popUp.active=!1,this.signupNode.active=!1,cc.director.preloadScene("game",function(){cc.log("Next scene preloaded")}),cc.loader.loadRes("loading",function(e,t){(l=cc.instantiate(t)).position=cc.v2({x:270,y:480}),r=l.getComponentInChildren(cc.Animation),cc.director.getScene().addChild(l),r.active=!1,l.active=!1,s.refreshBalance()})},confirmSound:function(){var e=cc.sys.localStorage.getItem("soundConfig");return"true"===e||null==e},playClick:function(){!0===s.confirmSound()&&(s.effect=cc.audioEngine.playEffect(s.tap_audio,!1))},playError:function(){!0===s.confirmSound()&&(s.error_mp3=cc.audioEngine.playEffect(s.error_audio,!1))},start:function(){null!=r&&(r.active=!1,l.active=!1)},setVolumeIconOff:function(){this.sound.getComponent(cc.Sprite).spriteFrame=this.iconVolumeOff},setVolumeIconOn:function(){this.sound.getComponent(cc.Sprite).spriteFrame=this.iconVolumeOn},runAnim:function(e){r.active=!0,l.active=!0;var t=r.getComponent(cc.Animation);if(e){var n=t.play();n.wrapMode=cc.WrapMode.Normal,n.repeatCount=1/0}else t.stop(),r.active=!1,l.active=!1},callback:function(e){s.playClick(),this.togglePopUpVisibility(),this.playButton.interactable=!1},othersLaunched:function(){},onDestroy:function(){cc.audioEngine.stopAll()},showSignUp:function(e){s.playClick(),this.signupNode.active=!0,this.playButton.interactable=!1},recharge:function(){cc.sys.localStorage.setItem("stageLaunched","recharge"),cc.director.loadScene("others")},withdraw:function(){cc.sys.localStorage.setItem("stageLaunched","withdraw"),cc.director.loadScene("others")},closeSignUp:function(e){this.toast.active=!1,this.popUp.active=!0,this.signupNode.active=!1},closeActivePopup:function(e){this.toast.active=!1},closeToastPopup:function(e){this.toast.active=!1,null!=(a=JSON.parse(cc.sys.localStorage.getItem("userData")))&&a.hasOwnProperty("token")?0==this.playButton.interactable&&(this.playButton.interactable=!0):this.popUp.active=!0},showcasePopup:function(){if(null!=(a=JSON.parse(cc.sys.localStorage.getItem("userData")))&&a.hasOwnProperty("token")){if(this.popUp.active=!1,a.hasOwnProperty("name")&&null!==a.name){var e=a.name.split(" ");this.messageToast.string="Welcome Back\n"+e[0],this.toast.active=!0}s.scheduleOnce(function(){s.closeToastPopup()},2.5)}},togglePopUpVisibility:function(){null!=(a=JSON.parse(cc.sys.localStorage.getItem("userData")))&&a.hasOwnProperty("token")?s.launchGame():(this.toast.active=!1,0==this.popUp.active&&(this.popUp.active=!0),0==this.playButton.interactable&&(this.playButton.interactable=!0))},refreshBalance:function(){null!=(a=JSON.parse(cc.sys.localStorage.getItem("userData")))&&a.hasOwnProperty("token")&&s.balanceRequest(a.token)},goHome:function(){cc.director.loadScene("home")},launchGame:function(){cc.director.loadScene("game")},formatMsisdn:function(e,t){return e.replace(/^234+/,"").replace(/[^0-9\\+]/g,"").replace(/(^[1-9].+)/g,t+"$1").replace(/(.)(\++)(.)/g,"$1$3").replace(/(^0{2}|^\\+)(.+)/g,"$2").replace(/^0([1-9])/g,t+"$1")},loginRequest:function(){s.playClick();var e="",t=0;if(""===this.phoneField.string||""===this.pinField.string)return s.playError(),s.messageToast.string="Fill all the fields to continue.",void(s.toast.active=!0);e=this.phoneField.string,t=this.pinField.string,this.popUp.active=!1,this.runAnim(!0);var n=JSON.stringify({input:t,platform:"Android",email:e}),o=(new Hashes.SHA512).hex(e+"P@s5w0rd_5@lt"+t),c=new XMLHttpRequest;c.open("POST","https://luckybox.ng/test/login/",!0),c.setRequestHeader("Content-Type","application/json"),c.setRequestHeader("signature",o),c.setRequestHeader("cache-control","no-cache"),c.timeout=1e4,c.ontimeout=function(e){s.runAnim(!1),s.playError(),s.messageToast.string="Request Timeout.\nCheck your network connection",s.toast.active=!0},c.addEventListener("readystatechange",function(){if(4===this.readyState)if(s.runAnim(!1),this.status>=200&&this.status<400){var e=JSON.parse(this.responseText);0==e.code&&null==e.error?(cc.sys.localStorage.clear(),a={},cc.sys.localStorage.setItem("userData",JSON.stringify(e)),s.refreshBalance(),s.showcasePopup()):(s.playError(),s.messageToast.string=e.error,s.toast.active=!0)}else s.playError(),cc.sys.localStorage.clear(),a={},s.messageToast.string="Network Error.\nTry again later",s.toast.active=!0}),c.send(n)},balanceRequest:function(e){this.popUp.active=!1,s.playButton.interactable=!1,this.runAnim(!0);var t=JSON.stringify({text:"Bal",token:e,platform:"Android",customer_id:a.customer_id}),n=(new Hashes.SHA512).hex(e+a.customer_id+"P@s5w0rd_5@ltBal"),o=new XMLHttpRequest;o.open("POST","https://luckybox.ng/test/interface/"),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("signature",n),o.setRequestHeader("cache-control","no-cache"),o.timeout=1e4,o.ontimeout=function(e){s.runAnim(!1),s.playError(),s.messageToast.string="Request Timeout.\nCheck your network connection",s.toast.active=!0},o.addEventListener("readystatechange",function(){if(4===this.readyState)if(s.runAnim(!1),0==s.playButton.interactable&&(s.playButton.interactable=!0),this.status>=200&&this.status<400){var e=JSON.parse(this.responseText);if(0==e.code&&null==e.error){s.balance.string=e.balance;var t={balance:e.balance};cc.sys.localStorage.setItem("balance",JSON.stringify(t)),s.bottomBar.runAction(cc.moveTo(.5,0,-425)),s.signOutSprite.runAction(cc.moveTo(.5,-213,420)),s.resetPinSprite.runAction(cc.moveTo(.5,213,420))}else 104==e.code?(cc.sys.localStorage.clear(),a={},s.messageToast.string="Session Expired\nLog in again to continue",s.toast.active=!0):(s.playError(),s.messageToast.string=e.error)}else s.playError(),cc.sys.localStorage.clear(),a={},s.messageToast.string="Network Errors.\nTry again later",s.toast.active=!0}),o.send(t)},signupRequest:function(){s.playClick();var e="",t="";if(""===this.signuppinField.string||""===this.signupemailField.string||!this.signupCheckBox.isChecked)return s.playError(),s.messageToast.string="Fill all the fields to continue.",void(s.toast.active=!0);e=this.signupemailField.string,t=this.signuppinField.string,this.popUp.active=!1,this.signupNode.active=!1,this.runAnim(!0);var n=JSON.stringify({email:e,platform:"Android",pin:t}),o=(new Hashes.SHA512).hex("P@s5w0rd_5@lt"+t+e),c=new XMLHttpRequest;c.open("POST","https://luckybox.ng/test/register/",!0),c.setRequestHeader("Content-Type","application/json"),c.setRequestHeader("signature",o),c.setRequestHeader("cache-control","no-cache"),c.timeout=1e4,c.ontimeout=function(e){s.runAnim(!1),s.playError(),s.messageToast.string="Request Timeout.\nCheck your network connection",s.toast.active=!0},c.addEventListener("readystatechange",function(){if(4===this.readyState)if(s.runAnim(!1),this.status>=200&&this.status<400){var e=JSON.parse(this.responseText);0==e.code&&null==e.error?(s.messageToast.string="Success. Check your email to continue",s.toast.active=!0):(s.playError(),s.messageToast.string=e.error,s.toast.active=!0)}else s.playError(),cc.sys.localStorage.clear(),a={},s.messageToast.string="Network Error.\nTry again later",s.toast.active=!0}),c.send(n)},fbloginRequest:function(){s.playClick(),this.popUp.active=!1,this.runAnim(!0),o.default.login(function(e){console.log(e),"connected"===e.status?FB.api("/me?fields=id,email,name",function(t){var n=JSON.stringify({userID:e.authResponse.userID?e.authResponse.userID:"",name:t.name?t.name:"",email:t.email?t.email:"",platform:"Android"}),o=(new Hashes.SHA512).hex(e.authResponse.userID+t.name+"P@s5w0rd_5@lt"+t.email),c=new XMLHttpRequest;c.open("POST","https://luckybox.ng/test/social/",!0),c.setRequestHeader("Content-Type","application/json"),c.setRequestHeader("signature",o),c.setRequestHeader("cache-control","no-cache"),c.timeout=1e4,c.ontimeout=function(e){s.runAnim(!1),s.playError(),s.messageToast.string="Request Timeout.\nCheck your network connection",s.toast.active=!0},c.addEventListener("readystatechange",function(){if(4===this.readyState)if(s.runAnim(!1),this.status>=200&&this.status<400){console.log(this.responseText);var e=JSON.parse(this.responseText);0==e.code&&null==e.error?(cc.sys.localStorage.clear(),a={},cc.sys.localStorage.setItem("userData",JSON.stringify(e)),s.refreshBalance(),s.showcasePopup()):(s.playError(),s.messageToast.string=e.error,s.toast.active=!0)}else s.playError(),cc.sys.localStorage.clear(),a={},s.messageToast.string="Network Error.\nTry again later",s.toast.active=!0}),c.send(n)}):(s.runAnim(!1),s.messageToast.string="There was an error logging you in with FaceBook. Try again",s.toast.active=!0)})},googleloginRequest:function(){s.playClick(),this.popUp.active=!1,this.runAnim(!0),c.default.loginBackup().then(function(e){console.log(e);var t=JSON.parse(e),n=(new Hashes.SHA512).hex(t.userID+t.name+"P@s5w0rd_5@lt"+t.email),o=new XMLHttpRequest;o.open("POST","https://luckybox.ng/test/social/",!0),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("signature",n),o.setRequestHeader("cache-control","no-cache"),o.timeout=1e4,o.ontimeout=function(e){s.runAnim(!1),s.playError(),s.messageToast.string="Request Timeout.\nCheck your network connection",s.toast.active=!0},o.addEventListener("readystatechange",function(){if(4===this.readyState)if(s.runAnim(!1),this.status>=200&&this.status<400){console.log(this.responseText);var e=JSON.parse(this.responseText);0==e.code&&null==e.error?(cc.sys.localStorage.clear(),a={},cc.sys.localStorage.setItem("userData",JSON.stringify(e)),s.refreshBalance(),s.showcasePopup()):(s.playError(),s.messageToast.string=e.error,s.toast.active=!0)}else s.playError(),cc.sys.localStorage.clear(),a={},s.messageToast.string="Network Error.\nTry again later",s.toast.active=!0}),o.send(e)})}}),cc._RF.pop()},{"../libs/fbsdk":"fbsdk","../libs/googlesdk":"googlesdk"}]},{},["fbsdk","googlesdk","Item","game","others","parent","start"]);